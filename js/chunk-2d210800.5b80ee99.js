(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d210800"],{b7c8:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"bg-primary pt-5"},[e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8 pb-4"},[t._m(0),e("ValidationObserver",{ref:"form"},[e("form",{staticClass:"checkout-form",on:{submit:function(s){return s.preventDefault(),t.createOrder(s)}}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"username"}},[t._v("姓名")]),e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,r=s.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:{"is-invalid":a},attrs:{type:"text",name:"姓名",id:"username"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),e("span",{staticClass:"text-info"},[t._v(t._s(r[0]))])]}}])})],1),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"usertel"}},[t._v("電話")]),e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,r=s.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:{"is-invalid":a},attrs:{type:"tel",id:"usertel",name:"電話"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),e("span",{staticClass:"text-info"},[t._v(t._s(r[0]))])]}}])})],1)]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useremail"}},[t._v("Email")]),e("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,r=s.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:{"is-invalid":a},attrs:{type:"email",name:"email",id:"useremail"},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),e("span",{staticClass:"text-info"},[t._v(t._s(r[0]))])]}}])})],1),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("地址")]),e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,r=s.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:{"is-invalid":a},attrs:{type:"text",name:"住址",id:"useraddress"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),e("span",{staticClass:"text-info"},[t._v(t._s(r[0]))])]}}])})],1),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"comment"}},[t._v("備註"),e("span",{staticClass:"text-danger"},[t._v("（選填）")])]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(s){s.target.composing||t.$set(t.form,"message",s.target.value)}}})]),e("div",{staticClass:"d-flex"},[e("button",{staticClass:"btn btn-back rounded-0 mr-auto d-flex",on:{click:function(s){return t.$router.go(-1)}}},[e("span",{staticClass:"material-icons"},[t._v(" keyboard_arrow_left ")]),t._v(" 回到購物車 ")]),e("button",{staticClass:"btn btn-accent rounded-0 py-3 px-5",on:{click:t.createOrder}},[t._v(" 送出訂單 ")])])])])],1),e("div",{staticClass:"col-md-4 text-white"},[e("h4",{staticClass:"pb-3"},[t._v("購物清單")]),t._l(t.carts.carts,(function(s){return e("div",{key:s.id,staticClass:"pb-2"},[e("div",{staticClass:"row justify-content-around pb-3"},[e("div",{staticClass:"col-3"},[e("div",{staticClass:"bg-cover checkout-img",style:{backgroundImage:"url("+s.product.imageUrl+")"}})]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"h6 ls-2"},[t._v(t._s(s.product.title))]),e("div",{staticClass:"h6 ls-2"},[t._v(" X "+t._s(s.qty))])]),e("div",{staticClass:"col-3"},[e("span",[t._v(t._s(t._f("currency")(s.product.price)))])])])])})),e("div",{staticClass:"bl"}),e("div",{staticClass:"d-flex pt-4"},[e("h4",[t._v("總計：")]),e("h4",{staticClass:"ml-auto"},[t._v(t._s(t._f("currency")(t.carts.final_total)))])])],2)])])],1)},r=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"progress-step text-center row mb-4"},[e("div",{staticClass:"col-4 step-1 on-step"},[e("div",{staticClass:"progress-dot"}),e("div",{staticClass:"progress-text"},[t._v("1. 訂單資料")])]),e("div",{staticClass:"col-4 step-2"},[e("div",{staticClass:"progress-dot"}),e("div",{staticClass:"progress-text"},[t._v("2. 確認付款")])]),e("div",{staticClass:"col-4 step-3"},[e("div",{staticClass:"progress-dot"}),e("div",{staticClass:"progress-text"},[t._v("3. 完成交易")])])])}],i=(e("99af"),e("5530")),o=e("7bb1"),l=e("4c93"),c=e("2f62");Object(o["c"])("required",Object(i["a"])(Object(i["a"])({},l["b"]),{},{message:"{_field_}欄位不得為空"})),Object(o["c"])("email",Object(i["a"])(Object(i["a"])({},l["a"]),{},{message:"信箱格式不正確"}));var n={name:"Checkout",data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{ValidationProvider:o["b"],ValidationObserver:o["a"]},methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["getCarts"])),{},{createOrder:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io/","api/").concat("kotard","/order");t.$refs.form.validate().then((function(e){e&&(t.$store.dispatch("updateLoading",!0),t.$http.post(s,{data:t.form}).then((function(s){s.data.success&&t.$router.push("/payment/".concat(s.data.orderId)),t.$store.dispatch("updateLoading",!1)})))}))}}),computed:Object(i["a"])({},Object(c["c"])(["isLoading","loadingId","carts"])),created:function(){this.getCarts(),this.message=""}},d=n,u=e("2877"),m=Object(u["a"])(d,a,r,!1,null,null,null);s["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d210800.5b80ee99.js.map